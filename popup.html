<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ChatGPT History Tracker</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ChatGPT Tracker</h1>
        <p class="subtitle" id="stats">Loading...</p>
      </header>

      <!-- Tabs -->
      <div class="tabs">
        <button class="tab active" data-tab="recent">Recent</button>
        <button class="tab" data-tab="projects">Projects</button>
        <button class="tab" data-tab="pinned">Pinned</button>
      </div>

      <!-- Tab: Recent Chats -->
      <div class="tab-content active" id="tab-recent">
        <div id="recentList" class="recent-list"></div>
      </div>

      <!-- Tab: Projects & Folders -->
      <div class="tab-content" id="tab-projects">
        <div id="projectsList" class="projects-list"></div>
        <p id="projectsEmpty" class="empty-hint" style="display: none">
          No projects found yet.
        </p>
      </div>

      <!-- Tab: Pinned -->
      <div class="tab-content" id="tab-pinned">
        <div id="pinnedList" class="recent-list"></div>
        <p id="pinnedEmpty" class="empty-hint" style="display: none">
          No pinned conversations yet. Pin a chat from the list below.
        </p>
      </div>

      <!-- Divider -->
      <div class="divider"></div>

      <!-- All Conversations -->
      <div class="section" id="allSection">
        <div class="section-header">
          <h2 class="section-title">All Conversations</h2>
          <div class="actions">
            <button
              id="exportBtn"
              class="btn btn-secondary"
              title="Export all as JSON"
            >
              Export
            </button>
            <button
              id="clearBtn"
              class="btn btn-danger"
              title="Delete all saved chats"
            >
              Clear All
            </button>
          </div>
        </div>

        <div class="search-bar">
          <input
            type="text"
            id="searchInput"
            placeholder="Search conversations..."
          />
        </div>

        <div id="conversationList" class="conversation-list"></div>

        <div id="emptyState" class="empty-state" style="display: none">
          <p>No conversations saved yet.</p>
          <p class="hint">
            Visit
            <a href="https://chatgpt.com" target="_blank">chatgpt.com</a> and
            start chatting. Your conversations will be saved automatically.
          </p>
        </div>
      </div>

      <!-- Detail View -->
      <div id="detailView" class="detail-view" style="display: none">
        <button id="backBtn" class="btn btn-back">&larr; Back</button>
        <h2 id="detailTitle"></h2>
        <p class="detail-meta" id="detailMeta"></p>
        <div id="detailMessages" class="messages"></div>
      </div>
    </div>
    <script src="popup.js"></script>
  </body>
</html>
